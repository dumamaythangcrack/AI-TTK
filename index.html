<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>TTK AI Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {font-family: 'Montserrat', sans-serif;background:#0d1117;color:#c9d1d9;margin:0;height:100vh;display:flex;justify-content:center;align-items:center;}
    .chat-container{width:95%;max-width:800px;height:90vh;display:flex;flex-direction:column;background:#0d1117;border:1px solid #30363d;border-radius:8px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,0.5);}
    .chat-header{background:#161b22;padding:15px;text-align:center;font-size:1.6em;font-weight:bold;border-bottom:1px solid #30363d;}
    .chat-messages{flex:1;overflow-y:auto;padding:15px;}
    .chat-messages::-webkit-scrollbar{width:8px;}
    .chat-messages::-webkit-scrollbar-thumb{background:#238636;border-radius:10px;}
    .message{margin:10px 0;display:flex;}
    .message.user{justify-content:flex-end;}
    .message.ai{justify-content:flex-start;}
    .bubble{padding:10px 14px;border-radius:8px;max-width:70%;word-wrap:break-word;}
    .user .bubble{background:#238636;color:white;border-bottom-right-radius:2px;}
    .ai .bubble{background:#21262d;color:#c9d1d9;border-bottom-left-radius:2px;}
    .chat-input{display:flex;border-top:1px solid #30363d;background:#161b22;padding:10px;}
    input{flex:1;padding:10px;background:#0d1117;color:#e6edf3;border:1px solid #30363d;border-radius:6px;}
    button{margin-left:10px;padding:10px 16px;background:#238636;color:white;border:none;border-radius:6px;cursor:pointer;font-weight:bold;}
    button:hover{background:#2ea043;}
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="chat-header">ü§ñ TTK AI Chat</div>
    <div id="messages" class="chat-messages"></div>
    <div class="chat-input">
      <input id="input" type="text" placeholder="Nh·∫≠p tin nh·∫Øn...">
      <button id="send">G·ª≠i</button>
    </div>
  </div>

  <script>
    const API_KEY = "AIzaSyCrzfPbVtDLKBAsdKO31vdHysBb8JDQYUU"; // ghi th·∫≥ng key v√†o ƒë√¢y
    const MODEL = "gemini-2.0-flash"; // model m·ªõi nh·∫•t
    const endpoint = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`;

    const messagesDiv = document.getElementById("messages");
    const input = document.getElementById("input");
    const sendBtn = document.getElementById("send");

    function addMessage(text, sender) {
      const msg = document.createElement("div");
      msg.className = `message ${sender}`;
      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = text;
      msg.appendChild(bubble);
      messagesDiv.appendChild(msg);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    async function sendMessage() {
      const text = input.value.trim();
      if (!text) return;
      addMessage(text, "user");
      input.value = "";
      addMessage("‚è≥ ƒêang tr·∫£ l·ªùi...", "ai");

      try {
        const res = await fetch(endpoint, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({
            contents: [{ parts: [{ text }] }]
          })
        });

        const data = await res.json();
        document.querySelector(".ai .bubble:last-child").remove();
        const reply = data?.candidates?.[0]?.content?.parts?.[0]?.text || "‚ö†Ô∏è Kh√¥ng c√≥ ph·∫£n h·ªìi t·ª´ AI.";
        addMessage(reply, "ai");
      } catch (e) {
        document.querySelector(".ai .bubble:last-child").remove();
        addMessage("‚ùå L·ªói k·∫øt n·ªëi ho·∫∑c key kh√¥ng h·ª£p l·ªá.", "ai");
        console.error(e);
      }
    }

    sendBtn.onclick = sendMessage;
    input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });

    // L·ªùi ch√†o khi m·ªü trang
    addMessage("Xin ch√†o! M√¨nh l√† TTK AI. B·∫°n mu·ªën m√¨nh gi√∫p g√¨ h√¥m nay?", "ai");
  </script>
</body>
</html>
